/* Author: Drew Chase */
function download(s,t){return new Promise((e,o)=>{https.get(s,s=>{s.pipe(fs.createWriteStream(t)).on("finish",e).on("error",o)})})}const https=require("https"),fs=require("fs"),path=require("path"),{log:log}=require("console"),output=`${__dirname}/out/`,url=process.argv[2];var css;fs.mkdirSync(output,{recursive:!0}),https.get(url,s=>{if(200===s.statusCode){let t="";s.on("data",s=>t+=s),s.on("end",async()=>{css=t;const s=/@font-face\s*{\s*font-family:\s*'([^']*)';\s*font-style:\s*([^;]*);\s*font-weight:\s*([^;]*);\s*.*\s*src:\s*url\(([^)]+)\).*\s*}/g;let e;for(;null!==(e=s.exec(css));){const s=e[1],t=e[2],o=e[3],r=e[4];let n=`${s}-${t}-${o}.${r.split(".").pop()}`;log(`Downloading ${n}...`),await download(r,path.join(output,n)),css=css.replace(r,n)}fs.writeFileSync(path.join(output,"fonts.css"),css)})}});