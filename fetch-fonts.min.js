/* Author: Drew Chase */
function download(s,t){return new Promise((o,e)=>{https.get(s,s=>{s.pipe(fs.createWriteStream(t)).on("finish",o).on("error",e)})})}const https=require("https"),fs=require("fs"),path=require("path"),{log:log}=require("console"),output=`${__dirname}/out/`,url=process.argv[2];var css;fs.mkdirSync(output,{recursive:!0}),https.get(url,s=>{if(200===s.statusCode){let t="";s.on("data",s=>t+=s),s.on("end",async()=>{css=t;const s=/@font-face\s*{\s*font-family:\s*'([^']*)';\s*font-style:\s*([^;]*);\s*font-weight:\s*([^;]*);\s*.*\s*src:\s*url\(([^)]+)\).*\s*}/g;let o;for(;null!==(o=s.exec(css));){const s=o[1],t=o[2],e=o[3],n=o[4];let r=`${s}-${t}-${e}.${n.split(".").pop()}`;log(`Downloading ${r}...`),await download(n,path.join(output,r)),css=css.replace(n,r)}log("Exporting fonts.css..."),fs.writeFileSync(path.join(output,"fonts.css"),css)})}});